  
----------------VirtualBox 要硬件BIOS打开Virtualization Technology(VT) 是Enabled

FreeNAS工具  NAS (Network Attached Storage),支持iSCSI protocols

主机环境
来宾环境

可命令行,和远程桌面(VRDP协议,RDP服务器)连接 VirtualBox

安装时只为当前用户安装 msiexec /i VirtualBox.msi ALLUSERS=2


安装目录有一个 VBoxGuestAdditions.iso 增强物理机与虚拟机功能,提高性能

启动 VirtualBox ,设备->安装增强功能,就会把ISO文件,放入虚拟操作的光驱中,安装后重启,
时间变同步,鼠标不用按右ctrl
修改窗口大小时,会自动填满,可以传剪贴板

共享文件,虚拟机可以仿问物理机的目录,设置->数据空间->增加 ,选择目录,输名称,可选中只读
在虚拟系统中就可以在网上邻居中仿问,不要用自动安装XP

按右ctrl+L 切换到无缝模式，VirtualBox 的一些菜单被隐藏

选择VM,快照修复标签，点生成快照,就是保存当前状态
控制->发送ctrl+alt+del


可以新增 SCSI,SATA,SAS,控制器
SATA不支持老的操作系统，Vista之前
IDE控制器 最多4个接口

动态扩展硬盘，在虚拟机中的硬盘大小始终大小是一样

Normal	磁盘镜像 同一时间只可以一个VM
Immuable磁盘镜像 多虚拟机可以同时使用一个镜像,操作会保存在其它文件中，当前关闭虚拟机,所有修改都会被丢弃

不能把一个虚拟镜像文件复制成另一个虚拟机，会给磁盘分配UUID，存在磁盘镜像中
使用VBoxManage clonevdi命令


把Normal磁盘转换为Immutable磁盘
1.先删除系统使用的硬盘
2.VBoxManage　unregisterimage disk c:\sss.vdi 
3.VBoxManage　registerimage disk c:\sss.vdi -type immutable
4.再所硬盘加系统
 


可能没有办法做Cluster的共享硬盘????

NAT 网络 ,相当于物理机是一个路由器,ping 无法使用,VirtualBox 有一个DHCP 服务器,外部不能仿问VM,

本机应该可以仿问VM吧,可以使用端口映射
 
VirtualBox ,Immutable 的虚拟文件是只读的,可以多个virtual box 同时仿问,所有修改在关闭装被删除,
而Visual PC使用undo disk 来保存

先把加的虚拟硬盘从virtualbox 卸下  
vboxmanage unregister d:\xxx.vdi
vboxmanage register d:\xxx.vdi -type immutable


Virtual Box 不支持支虚拟文件的复制,因为文件中有一个UUID


Visual PC 对Solaris ,openSolaris支持不太好
但多台相同系统,并行服务,可以不用复制,新一个difrencing硬盘,新建虚拟机时选择difrencingd硬盘



NAT
要想例Virtual Box让本机来仿问它,必须用
vboxmanage setextradata Windows2008 "VBoxInternal/Devices/pcnet/0/LUN#0/Config/mytestname/Protocol" TCP
vboxmanage setextradata Windows2008 "VBoxInternal/Devices/pcnet/0/LUN#0/Config/mytestname/GuestPort" 80
vboxmanage setextradata Windows2008 "VBoxInternal/Devices/pcnet/0/LUN#0/Config/mytestname/HostPort" 9000


Windows2008 是虚拟机名称,大小写敏感
mytestname自己起的
本机的9000端口对虚拟机的80端口
是在windows2008.xml文件中内容


netstat -ano  会显示进程号


Virtual Box 的ping 只通10.0.2.2和自己IP,和127.0.0.1


Host Interface Networking会加一个虚拟的网卡(桥接)

Internal networking 只可多个虚拟机内部仿问,不可和本机通讯


VirtulBox 调整 进入系统前的分辩率
VBoxManage setextradata "VM name" VBoxInternal2/EfiGopMode 2

0,1,2,3,4 referring to the 640x480, 800x600, 1024x768, 1280x1024, 1440x900

 
VirtualBox 6.0.x 新建时最高可选择 Mac OS X 10.13 High Sierra 客户机
 可以选择支持虚拟化 Enable VT-X/AMD-V


---linux  安装
openSUSE-leap-15.1 下使用All distributions包，即VirtualBox-xxx.run  报错 Details: code NS_ERROR_FAILURE (0x80004005)
卸载 VirtualBox-xxx.run 安装包生成的文件 /etc/vbox/vbox.cfg  里有写安装目录在 /opt/VirtualBox
安装rpm包就可以

openSUSE-leap-15.1
rpm -ivh /mnt/iso/x86_64/libQt5PrintSupport5-5.9.7-lp151.3.1.x86_64.rpm
rpm -ivh /mnt/iso/x86_64/libQt5OpenGL5-5.9.7-lp151.3.1.x86_64.rpm

可在openSUSE-leap-15.1
rpm -ivh VirtualBox-6.0-6.0.10_132072_openSUSE150-1.x86_64.rpm 
 
Creating group 'vboxusers'. VM users must be member of that group!
/etc/vbox/vbox.cfg


Created symlink /etc/systemd/system/multi-user.target.wants/vboxdrv.service → /usr/lib/systemd/system/vboxdrv.service.
Created symlink /etc/systemd/system/multi-user.target.wants/vboxballoonctrl-service.service → /usr/lib/systemd/system/vboxballoonctrl-service.service.
Created symlink /etc/systemd/system/multi-user.target.wants/vboxautostart-service.service → /usr/lib/systemd/system/vboxautostart-service.service.
Created symlink /etc/systemd/system/multi-user.target.wants/vboxweb-service.service → /usr/lib/systemd/system/vboxweb-service.service.
---


--------------VMWare Workstation
VMWare Workstation 10 默认安装后全部服务启动
VMware Authorization Service
VMware DHCP Service
VMware NAT Service
VMware Workstation Server


鼠标不用时,按ctrl+alt
			 
编辑->虚拟网络编辑器
 	VMnet0 是桥接模式
	VMNet1 是host-only
	VMNet8 是NAT

网卡属性->选NAT 就是 VMNet8的配置


限制上传/下载速度
网卡属性->Advanced...->Incoming Traffic 可限制下载速度
				->Outgoing Traffic 可限制上传速度
	

CPU属性-> 可以选中 Virtualize Inter VT-x/EPT or AMD-V/RVI


vmware 禁用声音
更改VMware的配置文件config.ini，如果是在windows上安装的，可以在路径：
“C:\Documents and Settings\All Users\Application Data\VMware\VMware Workstation”下找到，并加入如下行：
mks.noBeep = "TRUE"
重启Vmware 6.5workstation安装版后,立即生效
 
 
 
VMware同步时间 
VMware 右击虚拟机->Options->VMWare Tools->复选Synchronize guest time with host


---------VMware Workstation Pro 15 安装 Mac OS High Sierra  10.13  测试OK

https://github.com/DrDonk/unlocker
macOS Unlocker V3.0 for VMware Workstation  15 on Windows and Linux
要用 Python 2.7 (windows下可用 PyInstaller)安装后PATH中可找python

如有老版本必须先卸载
右击win-install.cmd-> 以管理员运行,不能有错误(会自动下载VMware Tools)。
root运行./lnx-install.sh

选择中已经有Mac OS 10.14 , 这里选择Mac OS 10.13 

CPU设置为1个处理器2核 (如用anroid模拟器 可以选择支持虚拟化Intel VT-x/EPT or AMD-V/RVI)
网络不连接
磁盘类型修改为选择SCSI  ,将虚拟磁盘存储为单个文件(40G)
完成后 设置虚拟机 光驱->高级->修改为SCSI 其它空闲的 ,指定镜像 OS 10.13 HSierra.cdr
#以前版本VMWware 有 固件类型为 EFI 现在没了

Disk Utility中Erease默认分区是Mac OS X Extend(Journaled)

win 10 没做这两步
	对windows版本 打开 .vmx 文件在已有的smc项尾增加   smc.version = "0" 
	1. Change the VM to be HW 10  ????
	
启动可进入欢迎页,可以安装成功，再重启有点慢(是因没有加smc.version = "0" ?),可以成功进入,
	看版本就是10.13(最高可以安装 Xcode-9.2 )，虚拟机两边有黑条，如点工作栏的自动拉抻就变形了
打开Finder指出光盘，安装 VMware Tools,重启后Mac 报VMware被System Extension Blocked,
		打开设置 Security & Privacy->General->下方点击Allow ，虚拟机两边还是有黑条,但如果全屏就正常了。
		以前版本是可以的
可以可拖文件到虚拟机中		
安装完成后共使用了12.5G的空间

打开网络，最好关闭Mac的 自动更新
--bak
当连接真机ipad到VMware中,内部的Mac OSX iTunes 不能识别出,关闭VMware,把 的USB 控制器默认3.0修改为2.0,再启动VMware就可以了
必须使用intel的cpu才能安装
(可直接启动)菜单"虚拟机"->电源->启动时进入BOIS->在BOIS菜单中选择Boot Manager->选择 EFI VMware Virtual SCSI CDROM Driver(1.0)->回车后再Continue启动

----------------Mac OS  Mojave 10.14.1  
  Xcode 10 requires a Mac running macOS 10.13.6 or later.
 
	
---linux下安装 VMware Workstation Pro 15

VMWare Workstation Pro 15 默认Shared VM路径 /var/lib/vmware/Shared VMs
外部可以使用https即443端口仿问
openSUSE Leap 15 运行时要 kernel Header 4.12.14-lp150.11-defalt  
http://download.opensuse.org/distribution/leap/15.0/repo/oss/x86_64/
        rpm -ivh kernel-default-devel-4.12.14-lp150.11.4.x86_64.rpm  libelf-devel-0.168-lp150.2.48.x86_64.rpm  zlib-devel-1.2.11-lp150.1.49.x86_64.rpm 
OK 提示要编译内核
 

-----VMWare Server 2.0

只有VMWare Server 可以做cluster用的磁盘,Workstation不可

不能和VMWare Workstation同存,不能打开VMWare Workstation生成的虚拟系统

安时输入的SN不定下有效,只有建立虚拟系统,并启动时才知道SN是否有效
记住安装时指定的Virtual Machines目录,默认http端口8222,默认https端口8333
http://localhost:8222/ui/   输入操作系统的用户名(带有administrator组中),密码
https://localhost:8333/ui/

Firefox中左侧的菜单和console不能显示,用IE8是可以正常显示,但也要安装自带的IE插件VMWare Remote Console Plug-in,启动后在IE中单击会在本地打开一个应用

Host Only方式的网卡与本机通信,右击本地连接->属性->共享->打开共享选择VMNet1,就可通信 


修改VMWare Server的*.vmx文件加入
disk.locking = "FALSE"
diskLib.dataCacheMaxSize = "0"
scsi1.sharedBus = "virtual"
#
scsi1:0.deviceType = "disk"
scsi1:1.deviceType = "disk"


VM->install VM tools,VMware-tools.rpm在安装目录下,加入光驱中
如果tar包解压运行vmware-install.pl来安装,安装后运行 vmware-toolbox-cmd timesync enable (status)
##如是rpm安装后运行vmware-config-tools.pl,安装后 vmware-toolbox 工具 , 选中Synchronize Time between virtural machine and your host 
就是在.vmx配置中加 tools.syncTime = "TRUE"	


选择 Time synchronization between the virtual machine and the host operating system。
“vmware-toolbox”以显示 VMware Tools Properties 窗口。在 Options 选项卡下，选择 发现 tools.syncTime = "TRUE" 

(Redhat)安装VMware Tools 后, 可以在windows中拖一个文件到VM中的Redhat系统的桌面或文件浏览器(Nautilus),可以实现文件传入功能

